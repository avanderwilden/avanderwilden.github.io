"0","pending <- df %>% "
"0","  filter(status == 'active') %>% "
"0","  filter(plan == 'month') %>% "
"0","  filter(cancel_at_period_end == T) %>% "
"0","  count(expiration_date)"
"0",""
"0","tot_pend <- scales::comma(sum(pending$n))"
"0","tm1 <- lubridate::today()"
"0",""
"0","pending_plot <- pending %>% "
"0","  filter(expiration_date >= wk_end_epi) %>% "
"0","  ggplot(aes(expiration_date, n)) +"
"0","  geom_col(fill = '#fc4e03', alpha = 0.77) +"
"0","  scale_y_continuous(expand = c(0,1),"
"0","                     breaks = scales::pretty_breaks(n = 5))+"
"0","  theme_minimal() +"
"0","  theme(legend.position = 'none',"
"0","        panel.border = element_blank(),"
"0","        panel.grid.minor = element_blank(),"
"0","        panel.grid.major.x = element_blank(),"
"0","        plot.title.position = 'plot',"
"0","        plot.title = element_text(face = 'bold', size = 11),"
"0","        plot.subtitle = element_text(face = 'italic', size = 9)) +"
"0","  labs(x = 'Expiration Date',"
"0","       y = 'Expiring Subscriptions',"
"0","       title = glue::glue(""{tot_pend} Pending Cancelations as of {wk_end_epi}""))"
"0",""
"0","plotly::ggplotly(pending_plot) %>% "
"0","  plotly::config(displayModeBar = F)"
