"0","cur_month <- df %>% "
"0","  filter(year(sub_start_date) == 2024 & month(sub_start_date) == 1)"
"0",""
"0","prev_churn <- df %>% "
"0","  filter(sub_start_date < mdy('1/1/2024')) %>% "
"0","  filter(status == 'canceled') %>% "
"0","  select(cognito_id) %>% "
"0","  as_vector()"
"0",""
"0","cur_month_adds <- nrow(cur_month)"
"0",""
"0","cur_month <- cur_month %>% "
"0","  mutate(new_ret = ifelse(cognito_id %in% prev_churn, 'winback', 'new'))"
"0",""
"0",""
"0","winbacks <- cur_month %>% "
"0","  count(new_ret) %>% "
"0","  filter(new_ret == 'winback') %>% "
"0","  pull(n)"
"0",""
"0","winback_pct <- winbacks/cur_month_adds"
"0",""
"0","vbox <- paste0(scales::comma(winbacks),' (',"
"0","               scales::percent(winback_pct,accuracy = 0.1),')')"
"0",""
"0","valueBox(value = vbox, icon = 'fa-recycle',"
"0","         caption = 'Winbacks', color = 'skyblue')"
